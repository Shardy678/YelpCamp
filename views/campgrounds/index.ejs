<% layout('layouts/boilerplate') %>
<div id="cluster-map"></div>
<h1>All Campgrounds</h1>
<div>
  <a class="btn btn-primary mb-2" href="/campgrounds/new" >Add new campground</a>
</div>
<div class="container">
  <div class="row">
    <% for (let i = 0; i < campgrounds.length; i++) { %>
      <% if (i % 2 === 0 && i !== 0) { %>
        </div>
        <div class="row">
      <% } %>

      <div class="col-md-6 mb-3">
        <div class="card">
          <% if(campgrounds[i].images.length) { %>
            <img src="<%= campgrounds[i].images[0].url %>" alt="" class="img-fluid card-img" />
          <% } else { %>
            <img
              class="img-fluid card-img"
              src="https://res.cloudinary.com/dw5fl7zgc/image/upload/v1723105490/YelpCamp/luqr1rvgfw15vkrsyumc.jpg"
              alt=""
            />
          <% } %>
          <div class="card-body">
            <h5 class="card-title"><%= campgrounds[i].title %></h5>
            <p class="card-text"><%= campgrounds[i].description %></p>
            <p class="card-text">
              <small class="text-tertiary"><%= campgrounds[i].location %></small>
            </p>
            <a href="campgrounds/<%= campgrounds[i]._id %>" class="btn btn-primary">
              View <%= campgrounds[i].title %>
            </a>
          </div>
        </div>
      </div>

    <% } %>
  </div>
</div>


</ul>
<script>
  const mapToken = "<%-process.env.MAPBOX_TOKEN%>"
  const campgrounds = {features: <%- JSON.stringify(campgrounds) %>}
</script>
<script src="/javascripts/clusterMap.js"></script>
